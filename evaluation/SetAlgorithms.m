%% List of algorithms to test
% This script creates the 'admm_algorithms' structure used by 'RunOnDataset.m'
% and 'SelectWeightsForDataset.m', and the 'demosaic_algorithms' and
% 'rgb_correction_algorithms' structures used by 'RunOnDataset.m'.

% ADMM family algorithms
admm_algorithms.spectralL1L1 = struct(...
    'name', 'Spectral L1L1',... % Pretty name for tables and graphs
    'file', 'L1L1',... % Short name for filenames
    'enabled', false,... % Whether or not to run the algorithm
    'spectral', true,... % Estimate spectral or colour images
    'priors', [true, true, false],... % Priors to enable (`false` means the corresponding weight will be zero)
    'options', struct('norms', [true, true, false], 'nonneg', false)... % Custom options for baek2017Algorithm2()
);
admm_algorithms.spectralL1L1NonNeg = struct(...
    'name', 'Spectral L1L1NonNeg',...
    'file', 'L1L1NonNeg',...
    'enabled', true,...
    'spectral', true,...
    'priors', [true, true, false],...
    'options', struct('norms', [true, true, false], 'nonneg', true)...
);
admm_algorithms.spectralL2L2 = struct(...
    'name', 'Spectral L2L2',...
    'file', 'L2L2',...
    'enabled', false,...
    'spectral', true,...
    'priors', [true, true, false],...
    'options', struct('norms', [false, false, false], 'nonneg', false)...
);
admm_algorithms.spectralL2L2NonNeg = struct(...
    'name', 'Spectral L2L2NonNeg',...
    'file', 'L2L2NonNeg',...
    'enabled', true,...
    'spectral', true,...
    'priors', [true, true, false],...
    'options', struct('norms', [false, false, false], 'nonneg', true)...
);
admm_algorithms.spectralL1NonNeg = struct(...
    'name', 'Spectral L1NonNeg',...
    'file', 'L1NonNeg',...
    'enabled', true,...
    'spectral', true,...
    'priors', [true, false, false],...
    'options', struct('norms', [true, false, false], 'nonneg', true)...
);
admm_algorithms.spectralL1 = struct(...
    'name', 'Spectral L1',...
    'file', 'L1',...
    'enabled', false,...
    'spectral', true,...
    'priors', [true, false, false],...
    'options', struct('norms', [true, false, false], 'nonneg', false)...
);
admm_algorithms.spectralL2NonNeg = struct(...
    'name', 'Spectral L2NonNeg',...
    'file', 'L2NonNeg',...
    'enabled', true,...
    'spectral', true,...
    'priors', [true, false, false],...
    'options', struct('norms', [false, false, false], 'nonneg', true)...
);
admm_algorithms.spectralL2 = struct(...
    'name', 'Spectral L2',...
    'file', 'L2',...
    'enabled', false,...
    'spectral', true,...
    'priors', [true, false, false],...
    'options', struct('norms', [false, false, false], 'nonneg', false)...
);

admm_algorithms.colorL1L1 = struct(...
    'name', 'Color L1L1',...
    'file', 'L1L1',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, true, false],...
    'options', struct('norms', [true, true, false], 'nonneg', false)...
);
admm_algorithms.colorL2L2 = struct(...
    'name', 'Color L2L2',...
    'file', 'L2L2',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, true, false],...
    'options', struct('norms', [false, false, false], 'nonneg', false)...
);
admm_algorithms.colorL1L1NonNeg = struct(...
    'name', 'Color L1L1NonNeg',...
    'file', 'L1L1NonNeg',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, true, false],...
    'options', struct('norms', [true, true, false], 'nonneg', true)...
);
admm_algorithms.colorL2L2NonNeg = struct(...
    'name', 'Color L2L2NonNeg',...
    'file', 'L2L2NonNeg',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, true, false],...
    'options', struct('norms', [false, false, false], 'nonneg', true)...
);
admm_algorithms.colorL1NonNeg = struct(...
    'name', 'Color L1NonNeg',...
    'file', 'L1NonNeg',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, false, false],...
    'options', struct('norms', [true, false, false], 'nonneg', true)...
);
admm_algorithms.colorL2NonNeg = struct(...
    'name', 'Color L2NonNeg',...
    'file', 'L2NonNeg',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, false, false],...
    'options', struct('norms', [false, false, false], 'nonneg', true)...
);
admm_algorithms.colorL1 = struct(...
    'name', 'Color L1',...
    'file', 'L1',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, false, false],...
    'options', struct('norms', [true, false, false], 'nonneg', false)...
);
admm_algorithms.colorL2 = struct(...
    'name', 'Color L2',...
    'file', 'L2',...
    'enabled', true,...
    'spectral', false,...
    'priors', [true, false, false],...
    'options', struct('norms', [false, false, false], 'nonneg', false)...
);

% Demosaicking algorithms
demosaic_algorithms.bilinear = struct(...
    'name', 'Bilinear demosaicking',... % Bilinear interpolation for demosaicking
    'file', 'bilinear',...
    'enabled', true,...
    'fn', @bilinearDemosaic... % Function to call
);
demosaic_algorithms.matlab = struct(...
    'name', 'MATLAB demosaicking',... % MATLAB's built-in demosaic() function
    'file', 'MATLABdemosaic',...
    'enabled', true,...
    'fn', 'matlab'... % Special handling is required for this algorithm
);
demosaic_algorithms.ari = struct(...
    'name', 'ARI demosaicking',... % Adaptive residual interpolation
    'file', 'ARI',...
    'enabled', true,...
    'fn', 'ARI'... % Special handling is required for this algorithm
);

% RGB-based chromatic aberration correction
rgb_correction_algorithms.rudakova2014 = struct(...
    'name', 'warp-corrected',...
    'file', 'channelWarp',...
    'enabled', true...
);
% Parameters 'psf_sz' and 'win_sz' were optimized using 'TuneSunEtAl2017.m'
rgb_correction_algorithms.sun2017 = struct(...
    'name', 'cct-corrected',...
    'file', 'cct',...
    'enabled', true,...
    'psf_sz', 0.1714,... % PSF estimation window size, as a fraction of the image's largest dimension
    'win_sz', 5,... % CCT implementation window size, as an absolute number of pixels
    'alpha', 0.3,...
    'beta', 0.3,...
    'iter', 3 ...
);